{{ define "response" }}
    {{- range $section_index, $section := (where .Site.Pages "Section" "providers").GroupByParam "provider" -}}
        {{- $section_len := (len .Pages) }}
        {{- range $page_index, $page :=  .Pages -}}
            {{- if not $page_index -}}
        "{{ $page.Params.provider }}": [
            {{- end }}
                    {
                        "title": "{{.Title}}",
                        "weight": {{.Page.Params.weight}},
                        "url": "{{ .Permalink }}index.md"
                    }{{- if not $page_index -}},{{- end -}}
        {{end}}
                ]{{ if not (eq $section_index $section_len) }},{{- end -}}
    {{ end }}
{{ end }}
